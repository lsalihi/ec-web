<div class="connectors-section">
    <h2 class="section-title">Connectors</h2>
    <div class="action-bar">
      <button class="btn btn-primary add-connector" (click)="openConnectorPopup()">
        <i class="fas fa-plus"></i> Add Connector
      </button>
    </div>
    <div *ngIf="errorMessage" class="alert alert-danger mt-3">
      {{ errorMessage }}
    </div>
    <div class="connector-list">
      <div *ngFor="let connector of connectors; let i = index" class="connector-card">
        <div class="connector-header">
          <h3>{{ connector.value.connectorType }}</h3>
          <div class="connector-actions">
            <button type="button" class="btn btn-sm btn-info me-1" (click)="editConnector(i)">
              <i class="fas fa-edit"></i>
            </button>
            <button type="button" class="btn btn-sm btn-danger" (click)="deleteConnector(i)">
              <i class="fas fa-trash"></i>
            </button>
          </div>
        </div>
        <div class="connector-body">
          <div class="connector-attributes">
            <div class="connector-attribute">
              <i class="fas fa-bolt"></i> {{ connector.value.power }} kW
            </div>
            <div class="connector-attribute">
              <i class="fas fa-plug"></i> {{ connector.value.voltage }} V
            </div>
            <div class="connector-attribute">
              <i class="fas fa-tachometer-alt"></i> {{ connector.value.intensity }} A
            </div>
            <div class="connector-attribute">
              <i class="fas fa-charging-station"></i> {{ connector.value.chargingSpeed }} kW/h
            </div>
            <div class="connector-attribute">
              <i class="fas fa-cube"></i> {{ connector.value.connectorFormat }}
            </div>
          </div>
          <div class="connector-pricing">
            <div class="price">
              <i class="fas fa-tag"></i> {{ connector.value.pricePerChargingSession | currency }}
            </div>
            <div class="duration">
              <i class="fas fa-clock"></i> {{ connector.value.durationOfChargingSession }} min
            </div>
          </div>
        </div>
        <div class="connector-footer">
          <button type="button" class="btn btn-sm btn-secondary" (click)="decrementConnector(i)" [disabled]="connector.value.quantity <= 1">-</button>
          <span class="connector-quantity">{{ connector.value.quantity }}</span>
          <button type="button" class="btn btn-sm btn-secondary" (click)="incrementConnector(i)">+</button>
        </div>
      </div>
    </div>
  
    <!-- Connector Popup -->
    <div class="modal" tabindex="-1" [ngClass]="{'show d-block': showConnectorPopup}" *ngIf="showConnectorPopup">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">{{ editingConnectorIndex === -1 ? 'Add Connector' : 'Edit Connector' }}</h5>
            <button type="button" class="btn-close" (click)="closeConnectorPopup()"></button>
          </div>
          <div class="modal-body">
            <form [formGroup]="connectorForm">
              <div class="mb-3">
                <label for="connectorType" class="form-label">Connector Type</label>
                <select id="connectorType" formControlName="connectorType" class="form-select">
                  <option *ngFor="let type of connectorTypes" [value]="type">{{ type }}</option>
                </select>
              </div>
              <div class="mb-3">
                <label for="power" class="form-label">Power (kW)</label>
                <input type="number" id="power" formControlName="power" class="form-control">
              </div>
              <div class="mb-3">
                <label for="voltage" class="form-label">Voltage (V)</label>
                <input type="number" id="voltage" formControlName="voltage" class="form-control">
              </div>
              <div class="mb-3">
                <label for="intensity" class="form-label">Intensity (A)</label>
                <input type="number" id="intensity" formControlName="intensity" class="form-control">
              </div>
              <div class="mb-3">
                <label for="chargingSpeed" class="form-label">Charging Speed (kW/h)</label>
                <input type="number" id="chargingSpeed" formControlName="chargingSpeed" class="form-control">
              </div>
              <div class="mb-3">
                <label for="connectorFormat" class="form-label">Connector Format</label>
                <input type="text" id="connectorFormat" formControlName="connectorFormat" class="form-control">
              </div>
              <div class="mb-3">
                <label for="pricePerChargingSession" class="form-label">Price per Charging Session</label>
                <input type="number" id="pricePerChargingSession" formControlName="pricePerChargingSession" class="form-control">
              </div>
              <div class="mb-3">
                <label for="durationOfChargingSession" class="form-label">Duration of Charging Session</label>
                <select id="durationOfChargingSession" formControlName="durationOfChargingSession" class="form-select">
                  <option *ngFor="let duration of chargingDurations" [value]="duration">{{duration}} minutes</option>
                </select>
              </div>
            </form>
            <div *ngIf="errorMessage" class="alert alert-danger mt-3">
              {{ errorMessage }}
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" (click)="closeConnectorPopup()">Cancel</button>
            <button type="button" class="btn btn-primary" (click)="saveConnector()">Save</button>
          </div>
        </div>
      </div>
    </div>
  </div>